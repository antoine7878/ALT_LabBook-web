# Migration `20201012145217-intial`

This migration has been generated by antoine7878 at 10/12/2020, 4:52:17 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "User" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "name" TEXT NOT NULL,
    "email" TEXT NOT NULL,
    "password" TEXT NOT NULL
)

CREATE TABLE "Group" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "ownerId" INTEGER,
    "name" TEXT NOT NULL,
    "img" TEXT NOT NULL,
    "struct" TEXT NOT NULL,
    "x" INTEGER NOT NULL,
    "y" INTEGER NOT NULL,
    "isArchived" BOOLEAN NOT NULL,

    FOREIGN KEY ("ownerId") REFERENCES "User"("id") ON DELETE SET NULL ON UPDATE CASCADE
)

CREATE TABLE "Compound" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "groupId" INTEGER NOT NULL,
    "name" TEXT NOT NULL,
    "img" TEXT NOT NULL,
    "struct" TEXT NOT NULL,

    FOREIGN KEY ("groupId") REFERENCES "Group"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE TABLE "Exp" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "compoundId" INTEGER NOT NULL,
    "name" TEXT NOT NULL,
    "procedure" TEXT NOT NULL,
    "notes" TEXT NOT NULL,
    "reference" TEXT NOT NULL,

    FOREIGN KEY ("compoundId") REFERENCES "Compound"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE TABLE "ExpTableLine" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "expId" INTEGER NOT NULL,
    "role" INTEGER NOT NULL,
    "name" TEXT NOT NULL,
    "equiv" REAL NOT NULL,
    "mol" REAL NOT NULL,
    "d" REAL NOT NULL,
    "conc" REAL NOT NULL,
    "mass" REAL NOT NULL,
    "vol" REAL NOT NULL,

    FOREIGN KEY ("expId") REFERENCES "Exp"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE UNIQUE INDEX "User.email_unique" ON "User"("email")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201012145217-intial
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,74 @@
+datasource db {
+  provider = "sqlite"
+  url = "***"
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model User {
+  id       Int     @id @default(autoincrement())
+  name     String
+  email    String  @unique
+  password String
+  groups   Group[]
+}
+
+model Group {
+  id         Int        @id @default(autoincrement())
+  createdAt  DateTime   @default(now())
+  ownerId    Int?
+  owner      User?      @relation(fields: [ownerId], references: [id])
+  name       String
+  img        String
+  struct     String
+  x          Int
+  y          Int
+  isArchived Boolean
+  Compound   Compound[]
+}
+
+model Compound {
+  id        Int      @id @default(autoincrement())
+  createdAt DateTime @default(now())
+  groupId   Int
+  group     Group    @relation(fields: [groupId], references: [id])
+  name      String
+  img       String
+  struct    String
+  Exp       Exp[]
+}
+
+model Exp {
+  id           Int            @id @default(autoincrement())
+  createdAt    DateTime       @default(now())
+  compoundId   Int
+  compound     Compound       @relation(fields: [compoundId], references: [id])
+  name         String
+  procedure    String
+  notes        String
+  reference    String
+  ExpTableLine ExpTableLine[]
+}
+
+model ExpTableLine {
+  id    Int    @id @default(autoincrement())
+  expId Int
+  exp   Exp    @relation(fields: [expId], references: [id])
+  role  Int
+  name  String
+  equiv Float
+  mol   Float
+  d     Float
+  conc  Float
+  mass  Float
+  vol   Float
+}
+
+//role :
+//0 SM
+//1 R
+//2 S
+//3 P
+//4 BP
```


